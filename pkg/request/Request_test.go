package request

import (
	"testing"

	"github.com/stretchr/testify/assert"
)

// -- tests --
func TestDecodeRequest_U(t *testing.T) {
	body := `eyJzb3VyY2UiOnsianNvbiI6IntcInJvb3RJZFwiOlwieC1jb3JlZGF0YTpcXFwvXFxcL0I0NTZDQjVELTBGMTgtNEQ1NC1CM0VDLTAxOTY2OTk4MDcwQlxcXC9SZWNpcGVSb290UmVjXFxcL3A0XCIsXCJ1cGRhdGVkXCI6XCIyMDIyLTEwLTEwVDEyOjAwOjE3WlwiLFwic3VidGl0bGVcIjpcIlwiLFwiaWRcIjpcIngtY29yZWRhdGE6XFxcL1xcXC9CNDU2Q0I1RC0wRjE4LTRENTQtQjNFQy0wMTk2Njk5ODA3MEJcXFwvUmVjaXBlUmVjXFxcL3A0XCIsXCJpbmdyZWRpZW50c1wiOltdLFwidGl0bGVcIjpcIkZsZXhpYmlsaXR5XCIsXCJub3Rlc1wiOlwiWW91IGNhbiB3cml0ZSBlYWNoIHJlY2lwZSB5b3VyIHdheSB1c2luZyB0aGVzZSB0aHJlZSBzZWN0aW9uczpcXG5cXG4tIEluZ3JlZGllbnRzXFxuLSBOb3Rlc1xcbi0gUmVmZXJlbmNlc1xcblxcbllvdeKAmWxsIHNlZSBzb21lIGRpZmZlcmVudCB2YXJpYXRpb25zIGluIHRoZXNlIGV4YW1wbGVzLiBFbmpveSFcXG5cXG5JZiB5b3XigJlyZSBjdXJpb3VzLCB0aGVyZeKAmXMgbW9yZSBpbmZvIGJlbG93LlwiLFwic2hhcmVcIjpudWxsLFwiY3JlYXRlZFwiOlwiMjAyMi0xMC0xMFQxMjowMDoxN1pcIixcInJlZmVyZW5jZXNcIjpbe1wiaWRcIjpcIngtY29yZWRhdGE6XFxcL1xcXC9CNDU2Q0I1RC0wRjE4LTRENTQtQjNFQy0wMTk2Njk5ODA3MEJcXFwvUmVmZXJlbmNlUmVjXFxcL3A2XCIsXCJuYW1lXCI6XCJGZWF0dXJlc1wiLFwiaW5mb1wiOlwiaHR0cHM6XFxcL1xcXC9taXNlYXBwLmNvXFxcL2ZlYXR1cmVzXCJ9LHtcImlkXCI6XCJ4LWNvcmVkYXRhOlxcXC9cXFwvQjQ1NkNCNUQtMEYxOC00RDU0LUIzRUMtMDE5NjY5OTgwNzBCXFxcL1JlZmVyZW5jZVJlY1xcXC9wN1wiLFwibmFtZVwiOlwiRkFRXCIsXCJpbmZvXCI6XCJodHRwczpcXFwvXFxcL21pc2VhcHAuY29cXFwvZmFxXCJ9XX0ifX0K`
	req, err := DecodeRequestBody(body, true)

	assert.Nil(t, err)
	assert.NotEmpty(t, req.Source.Json)
}
